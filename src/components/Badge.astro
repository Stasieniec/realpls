---
interface Props {
  status: 'ok' | 'warn' | 'fail' | 'info';
  size?: 'sm' | 'md';
}

const { status, size = 'md' } = Astro.props;

const labels: Record<string, string> = {
  ok: 'OK',
  warn: 'Warning',
  fail: 'Issue',
  info: 'Info',
};

const icons: Record<string, string> = {
  ok: `<path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>`,
  warn: `<path d="M12 9v2m0 4h.01M12 3l9.196 15H2.804L12 3z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>`,
  fail: `<circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5"/><path d="M15 9l-6 6m0-6l6 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>`,
  info: `<circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5"/><path d="M12 8h.01M12 11v5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>`,
};
---

<span class:list={['badge', `badge--${status}`, `badge--${size}`]} role="status">
  <svg class="badge-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" set:html={icons[status]} />
  <span class="badge-label">{labels[status]}</span>
</span>

<style>
  .badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    font-weight: 500;
    border-radius: var(--radius-full);
  }
  
  .badge--sm {
    padding: 2px var(--space-2);
    font-size: var(--text-xs);
  }
  
  .badge--sm .badge-icon {
    width: 12px;
    height: 12px;
  }
  
  .badge--md {
    padding: var(--space-1) var(--space-3);
    font-size: var(--text-sm);
  }
  
  .badge--ok {
    background: var(--color-ok-bg);
    color: var(--color-ok);
  }
  
  .badge--warn {
    background: var(--color-warn-bg);
    color: var(--color-warn);
  }
  
  .badge--fail {
    background: var(--color-fail-bg);
    color: var(--color-fail);
  }
  
  .badge--info {
    background: var(--color-info-bg);
    color: var(--color-info);
  }
  
  .badge-icon {
    flex-shrink: 0;
  }
</style>

